# /$$      /$$  /$$$$$$  /$$   /$$          
#| $$$    /$$$ /$$__  $$| $$  | $$          
#| $$$$  /$$$$| $$  \__/| $$  | $$  /$$$$$$$
#| $$ $$/$$ $$| $$      | $$  | $$ /$$_____/
#| $$  $$$| $$| $$      | $$  | $$|  $$$$$$ 
#| $$\  $ | $$| $$    $$| $$  | $$ \____  $$
#| $$ \/  | $$|  $$$$$$/|  $$$$$$/ /$$$$$$$/
#|__/     |__/ \______/  \______/ |_______/

# Sovol Sv06 MCU (Main Printer)
[mcu]
serial: /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
restart_method: command

# External MCU to control toolhead ADXL and printer lighting color (cheapo led strip hooked up to a WS2811)
[mcu CARSEXTENDEDEXTENSION]
serial: /dev/serial/by-id/usb-Klipper_rp2040_15CD5C9711384E53-if00

[printer]
kinematics: cartesian
max_velocity: 400 # 500 is safe, requires better hotend though (wah wah 15mm3 is bad(mf even 20 isnt enough, a minimum of 30 or 45 is needed?!))
max_accel: 9000
max_accel_to_decel: 9000
max_z_velocity: 20
max_z_accel: 45
square_corner_velocity: 5.0

# /$$$$$$ /$$   /$$ /$$$$$$$  /$$   /$$ /$$$$$$$$        /$$$$$$  /$$   /$$  /$$$$$$  /$$$$$$$  /$$$$$$ /$$   /$$  /$$$$$$              /$$        /$$$$$$  /$$$$$$$$ /$$   /$$  /$$$$$$   /$$$$$$  /$$$$$$$   /$$$$$$ 
#|_  $$_/| $$$ | $$| $$__  $$| $$  | $$|__  $$__/       /$$__  $$| $$  | $$ /$$__  $$| $$__  $$|_  $$_/| $$$ | $$ /$$__  $$            /$$/       /$$__  $$| $$_____/| $$$ | $$ /$$__  $$ /$$__  $$| $$__  $$ /$$__  $$
#  | $$  | $$$$| $$| $$  \ $$| $$  | $$   | $$         | $$  \__/| $$  | $$| $$  \ $$| $$  \ $$  | $$  | $$$$| $$| $$  \__/           /$$/       | $$  \__/| $$      | $$$$| $$| $$  \__/| $$  \ $$| $$  \ $$| $$  \__/
#  | $$  | $$ $$ $$| $$$$$$$/| $$  | $$   | $$         |  $$$$$$ | $$$$$$$$| $$$$$$$$| $$$$$$$/  | $$  | $$ $$ $$| $$ /$$$$          /$$/        |  $$$$$$ | $$$$$   | $$ $$ $$|  $$$$$$ | $$  | $$| $$$$$$$/|  $$$$$$ 
#  | $$  | $$  $$$$| $$____/ | $$  | $$   | $$          \____  $$| $$__  $$| $$__  $$| $$____/   | $$  | $$  $$$$| $$|_  $$         /$$/          \____  $$| $$__/   | $$  $$$$ \____  $$| $$  | $$| $$__  $$ \____  $$
#  | $$  | $$\  $$$| $$      | $$  | $$   | $$          /$$  \ $$| $$  | $$| $$  | $$| $$        | $$  | $$\  $$$| $$  \ $$        /$$/           /$$  \ $$| $$      | $$\  $$$ /$$  \ $$| $$  | $$| $$  \ $$ /$$  \ $$
# /$$$$$$| $$ \  $$| $$      |  $$$$$$/   | $$         |  $$$$$$/| $$  | $$| $$  | $$| $$       /$$$$$$| $$ \  $$|  $$$$$$/       /$$/           |  $$$$$$/| $$$$$$$$| $$ \  $$|  $$$$$$/|  $$$$$$/| $$  | $$|  $$$$$$/
#|______/|__/  \__/|__/       \______/    |__/          \______/ |__/  |__/|__/  |__/|__/      |______/|__/  \__/ \______/       |__/             \______/ |________/|__/  \__/ \______/  \______/ |__/  |__/ \______/ 
                                                                                                                                                                                                                      

#[include cfgs/adxl-rp2040.cfg] # PIS (Portable Input Shaper) only when input shaping is enabled for the bed

# ADXL for the toolhead 
[adxl345 extruder]
cs_pin: CARSEXTENDEDEXTENSION:gpio28
spi_software_sclk_pin: CARSEXTENDEDEXTENSION:gpio21
spi_software_mosi_pin: CARSEXTENDEDEXTENSION:gpio19
spi_software_miso_pin: CARSEXTENDEDEXTENSION:gpio22
axes_map: -y,-x,z

                                                                               
#  /$$$$$$  /$$$$$$$$ /$$$$$$$$ /$$$$$$$  /$$$$$$$  /$$$$$$$$ /$$$$$$$   /$$$$$$ 
# /$$__  $$|__  $$__/| $$_____/| $$__  $$| $$__  $$| $$_____/| $$__  $$ /$$__  $$
#| $$  \__/   | $$   | $$      | $$  \ $$| $$  \ $$| $$      | $$  \ $$| $$  \__/
#|  $$$$$$    | $$   | $$$$$   | $$$$$$$/| $$$$$$$/| $$$$$   | $$$$$$$/|  $$$$$$ 
# \____  $$   | $$   | $$__/   | $$____/ | $$____/ | $$__/   | $$__  $$ \____  $$
# /$$  \ $$   | $$   | $$      | $$      | $$      | $$      | $$  \ $$ /$$  \ $$
#|  $$$$$$/   | $$   | $$$$$$$$| $$      | $$      | $$$$$$$$| $$  | $$|  $$$$$$/
# \______/    |__/   |________/|__/      |__/      |________/|__/  |__/ \______/          

[include cfgs/steppers.cfg]

# /$$$$$$$  /$$$$$$$$ /$$$$$$$ 
#| $$__  $$| $$_____/| $$__  $$
#| $$  \ $$| $$      | $$  \ $$
#| $$$$$$$ | $$$$$   | $$  | $$
#| $$__  $$| $$__/   | $$  | $$
#| $$  \ $$| $$      | $$  | $$
#| $$$$$$$/| $$$$$$$$| $$$$$$$/
#|_______/ |________/|_______/

[include cfgs/bed.cfg]  

# /$$      /$$ /$$$$$$  /$$$$$$   /$$$$$$           /$$   /$$  /$$$$$$  /$$$$$$$  /$$$$$$$  /$$      /$$  /$$$$$$  /$$$$$$$  /$$$$$$$$
#| $$$    /$$$|_  $$_/ /$$__  $$ /$$__  $$         | $$  | $$ /$$__  $$| $$__  $$| $$__  $$| $$  /$ | $$ /$$__  $$| $$__  $$| $$_____/
#| $$$$  /$$$$  | $$  | $$  \__/| $$  \__/         | $$  | $$| $$  \ $$| $$  \ $$| $$  \ $$| $$ /$$$| $$| $$  \ $$| $$  \ $$| $$      
#| $$ $$/$$ $$  | $$  |  $$$$$$ | $$               | $$$$$$$$| $$$$$$$$| $$$$$$$/| $$  | $$| $$/$$ $$ $$| $$$$$$$$| $$$$$$$/| $$$$$   
#| $$  $$$| $$  | $$   \____  $$| $$               | $$__  $$| $$__  $$| $$__  $$| $$  | $$| $$$$_  $$$$| $$__  $$| $$__  $$| $$__/   
#| $$\  $ | $$  | $$   /$$  \ $$| $$    $$         | $$  | $$| $$  | $$| $$  \ $$| $$  | $$| $$$/ \  $$$| $$  | $$| $$  \ $$| $$      
#| $$ \/  | $$ /$$$$$$|  $$$$$$/|  $$$$$$//$$      | $$  | $$| $$  | $$| $$  | $$| $$$$$$$/| $$/   \  $$| $$  | $$| $$  | $$| $$$$$$$$
#|__/     |__/|______/ \______/  \______/|__/      |__/  |__/|__/  |__/|__/  |__/|_______/ |__/     \__/|__/  |__/|__/  |__/|________/

[include cfgs/misc-hardware.cfg]                                                                                                                 
                                                                                                                                     
# /$$      /$$  /$$$$$$   /$$$$$$  /$$$$$$$   /$$$$$$         /$$$$$$  /$$$$$$$$ /$$$$$$$$ /$$$$$$$$ /$$$$$$ /$$   /$$  /$$$$$$   /$$$$$$ 
#| $$$    /$$$ /$$__  $$ /$$__  $$| $$__  $$ /$$__  $$       /$$__  $$| $$_____/|__  $$__/|__  $$__/|_  $$_/| $$$ | $$ /$$__  $$ /$$__  $$
#| $$$$  /$$$$| $$  \ $$| $$  \__/| $$  \ $$| $$  \ $$      | $$  \__/| $$         | $$      | $$     | $$  | $$$$| $$| $$  \__/| $$  \__/
#| $$ $$/$$ $$| $$$$$$$$| $$      | $$$$$$$/| $$  | $$      |  $$$$$$ | $$$$$      | $$      | $$     | $$  | $$ $$ $$| $$ /$$$$|  $$$$$$ 
#| $$  $$$| $$| $$__  $$| $$      | $$__  $$| $$  | $$       \____  $$| $$__/      | $$      | $$     | $$  | $$  $$$$| $$|_  $$ \____  $$
#| $$\  $ | $$| $$  | $$| $$    $$| $$  \ $$| $$  | $$       /$$  \ $$| $$         | $$      | $$     | $$  | $$\  $$$| $$  \ $$ /$$  \ $$
#| $$ \/  | $$| $$  | $$|  $$$$$$/| $$  | $$|  $$$$$$/      |  $$$$$$/| $$$$$$$$   | $$      | $$    /$$$$$$| $$ \  $$|  $$$$$$/|  $$$$$$/
#|__/     |__/|__/  |__/ \______/ |__/  |__/ \______/        \______/ |________/   |__/      |__/   |______/|__/  \__/ \______/  \______/ 

[gcode_macro _globals]
variable_filament_sensor_enabled: 0 # NOTE Enable(1) or disable(0) the filament sensor, if one is connected
variable_beeping_enabled: 1 # NOTE Enable(1) or disable(0) beeping everywhere except during gantry calibration
variable_bed_temp_over: 10 # NOTE Start print if bed temperature is over by this amount, otherwise wait for temperature drop
variable_kamp_enable: 1 # NOTE Enable(1) or disable(0) KAMP (adaptive mesh)
variable_pre_purge_prime_length: 1.40
gcode:
    # Don't delete this section
    

[include cfgs/macro-link.cfg]


#  /$$$$$$  /$$   /$$ /$$$$$$$$ /$$$$$$         /$$$$$$  /$$$$$$$$ /$$   /$$ /$$$$$$$$ /$$$$$$$   /$$$$$$  /$$$$$$$$ /$$$$$$$$ /$$$$$$$        /$$    /$$  /$$$$$$  /$$       /$$   /$$ /$$$$$$$$  /$$$$$$       
# /$$__  $$| $$  | $$|__  $$__//$$__  $$       /$$__  $$| $$_____/| $$$ | $$| $$_____/| $$__  $$ /$$__  $$|__  $$__/| $$_____/| $$__  $$      | $$   | $$ /$$__  $$| $$      | $$  | $$| $$_____/ /$$__  $$      
#| $$  \ $$| $$  | $$   | $$  | $$  \ $$      | $$  \__/| $$      | $$$$| $$| $$      | $$  \ $$| $$  \ $$   | $$   | $$      | $$  \ $$      | $$   | $$| $$  \ $$| $$      | $$  | $$| $$      | $$  \__/      
#| $$$$$$$$| $$  | $$   | $$  | $$  | $$      | $$ /$$$$| $$$$$   | $$ $$ $$| $$$$$   | $$$$$$$/| $$$$$$$$   | $$   | $$$$$   | $$  | $$      |  $$ / $$/| $$$$$$$$| $$      | $$  | $$| $$$$$   |  $$$$$$       
#| $$__  $$| $$  | $$   | $$  | $$  | $$      | $$|_  $$| $$__/   | $$  $$$$| $$__/   | $$__  $$| $$__  $$   | $$   | $$__/   | $$  | $$       \  $$ $$/ | $$__  $$| $$      | $$  | $$| $$__/    \____  $$      
#| $$  | $$| $$  | $$   | $$  | $$  | $$      | $$  \ $$| $$      | $$\  $$$| $$      | $$  \ $$| $$  | $$   | $$   | $$      | $$  | $$        \  $$$/  | $$  | $$| $$      | $$  | $$| $$       /$$  \ $$      
#| $$  | $$|  $$$$$$/   | $$  |  $$$$$$/      |  $$$$$$/| $$$$$$$$| $$ \  $$| $$$$$$$$| $$  | $$| $$  | $$   | $$   | $$$$$$$$| $$$$$$$/         \  $/   | $$  | $$| $$$$$$$$|  $$$$$$/| $$$$$$$$|  $$$$$$/      
#|__/  |__/ \______/    |__/   \______/        \______/ |________/|__/  \__/|________/|__/  |__/|__/  |__/   |__/   |________/|_______/           \_/    |__/  |__/|________/ \______/ |________/ \______/       
#                                                                                                                                                                                                                
#                                                                                                                                                                                                                
#                                                                                                                                                                                                                
#   /$$$       /$$$$$$$   /$$$$$$        /$$   /$$  /$$$$$$  /$$$$$$$$       /$$$$$$$  /$$$$$$$$ /$$       /$$$$$$$$ /$$$$$$$$ /$$$$$$$$             /$$       /$$$$$$$$ /$$$$$$$  /$$$$$$ /$$$$$$$$       /$$$  
#  /$$_/      | $$__  $$ /$$__  $$      | $$$ | $$ /$$__  $$|__  $$__/      | $$__  $$| $$_____/| $$      | $$_____/|__  $$__/| $$_____/            /$$/      | $$_____/| $$__  $$|_  $$_/|__  $$__/      |_  $$ 
# /$$/        | $$  \ $$| $$  \ $$      | $$$$| $$| $$  \ $$   | $$         | $$  \ $$| $$      | $$      | $$         | $$   | $$                 /$$/       | $$      | $$  \ $$  | $$     | $$           \  $$
#| $$         | $$  | $$| $$  | $$      | $$ $$ $$| $$  | $$   | $$         | $$  | $$| $$$$$   | $$      | $$$$$      | $$   | $$$$$             /$$/        | $$$$$   | $$  | $$  | $$     | $$            | $$
#| $$         | $$  | $$| $$  | $$      | $$  $$$$| $$  | $$   | $$         | $$  | $$| $$__/   | $$      | $$__/      | $$   | $$__/            /$$/         | $$__/   | $$  | $$  | $$     | $$            | $$
#|  $$        | $$  | $$| $$  | $$      | $$\  $$$| $$  | $$   | $$         | $$  | $$| $$      | $$      | $$         | $$   | $$              /$$/          | $$      | $$  | $$  | $$     | $$            /$$/
# \  $$$      | $$$$$$$/|  $$$$$$/      | $$ \  $$|  $$$$$$/   | $$         | $$$$$$$/| $$$$$$$$| $$$$$$$$| $$$$$$$$   | $$   | $$$$$$$$       /$$/           | $$$$$$$$| $$$$$$$/ /$$$$$$   | $$          /$$$/ 
#  \___/      |_______/  \______/       |__/  \__/ \______/    |__/         |_______/ |________/|________/|________/   |__/   |________/      |__/            |________/|_______/ |______/   |__/         |___/

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [input_shaper]
#*# shaper_type_y = mzv
#*# shaper_freq_y = 44.6
#*# shaper_type_x = ei
#*# shaper_freq_x = 42.8
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 69.377
#*# pid_ki = 1.368
#*# pid_kd = 879.349
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 21.300
#*# pid_ki = 1.392
#*# pid_kd = 81.471
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.014375, -0.011875, -0.091875
#*# 	-0.006875, -0.031250, -0.118750
#*# 	-0.031250, -0.060000, -0.135000
#*# x_count = 3
#*# y_count = 3
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = 85.0
#*# max_x = 144.98000000000002
#*# min_y = 99.51
#*# max_y = 130.49
#*#
#*# [probe]
#*# z_offset = 1.068
